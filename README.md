# 🧬 遺伝学的家系図作成 GPTs (Proto v0.1)

JOHBOC（日本遺伝性腫瘍学会）および日本人類遺伝学会のガイドラインに準拠した、遺伝診療用家系図（Genogram/Pedigree Chart）を作成するための ChatGPT (GPTs) 用アセットです。

> [!WARNING]
> **⚠️ 開発中 (Alpha Preview) ⚠️**
> 本プロジェクトは現在 **v0.1 (プロトタイプ)** です。
> 研究・開発目的で公開されており、**臨床現場での実運用にはまだ達していません。**
> 生成された家系図の正確性を保証するものではなく、使用に伴う責任は負いかねます。必ず専門家の確認を併用してください。

## 概要
*   自然言語での対話から家系情報を構造化し、SVG形式の家系図を自動生成します。
*   **JOHBOC 2024 ガイドライン準拠**: 日本の遺伝カウンセリングで推奨される厳格な記号ルール（死亡斜線の向き、人工中絶の表記など）をコードレベルで実装しています。
*   **SVG出力**: draw.io や Illustrator 等で後編集可能なベクターデータを出力します。

## ファイル構成
*   `genealogy_gpt_instructions_v0.1.md`: GPTs の "Instructions" に設定するプロンプト。
*   `pedigree_drawer_lib_v0_1.py`: GPTs の "Knowledge" にアップロードする描画エンジン (Python)。
*   `開発ログ/`: 開発経緯の記録。

## 使い方 (GPTsセットアップ)

1. **ChatGPT** で「Explore GPTs」→「+ Create」を選択。
2. **Configure** タブを開く。
3. **Instructions** 欄に `genealogy_gpt_instructions_v0.1.md` の内容をすべて貼り付ける。
4. **Knowledge** の「Upload files」から `pedigree_drawer_lib_v0_1.py` をアップロードする。
5. **Capabilities** で「Code Interpreter」のみを ON にする（Web Browsing, DALL-E は OFF）。
6. 保存して使用開始。

## 主な機能と制約 (v0.1)

### 対応している記号・機能
*   ✅ 性別（□男性, ○女性, ◇性別不明）
*   ✅ 発端者 (P↗) / 来談者 (↗)
*   ✅ 罹患者 (黒塗り) / 死亡 (左下から右上の斜線)
*   ✅ 妊娠関連: 自然流産 (△), 人工妊娠中絶 (△+斜線), 死産 (SB+斜線)
*   ✅ 無症状変異保有者 (縦線) / 記録確認済み (*)
*   ✅ 線: 婚姻, 近親婚(二重線), 離婚(//)

### 現状の制約 (Limitations)
*   **レイアウト**: 簡易的な自動配置アルゴリズムのため、複雑な多世代・多人数家系では線が重なる場合があります。
*   **双生児**: データの入力としては対応していますが、描画（分岐線）が完全に最適化されていません。
*   **例外処理**: ガイドライン外の特殊な状況（代理母・卵子提供など）の描画は未実装です。

## ライセンス
MIT License
